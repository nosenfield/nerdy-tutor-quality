# ============================================
# TUTOR QUALITY SCORING SYSTEM
# Environment Variables Template
# ============================================
#
# SETUP INSTRUCTIONS:
# 1. Copy this file to .env.local
#    cp .env.example .env.local
#
# 2. Fill in all [REQUIRED] values
# 3. Optional values can be left commented out
# 4. NEVER commit .env.local to git
#
# ============================================

# ============================================
# DATABASE - Supabase PostgreSQL [REQUIRED]
# ============================================
# Get from: Supabase Dashboard > Project Settings > Database > Connection String

# Connection Pooling (recommended for Drizzle ORM)
# Format: postgresql://postgres.xxxxx:[YOUR-PASSWORD]@aws-0-[region].pooler.supabase.com:6543/postgres
DATABASE_URL="postgresql://postgres.xxxxx:REPLACE_WITH_YOUR_PASSWORD@aws-0-us-west-1.pooler.supabase.com:6543/postgres"

# Direct Connection (for migrations)
# Format: postgresql://postgres:[YOUR-PASSWORD]@db.xxxxx.supabase.co:5432/postgres
DIRECT_URL="postgresql://postgres:REPLACE_WITH_YOUR_PASSWORD@db.xxxxx.supabase.co:5432/postgres"

# ============================================
# REDIS - Upstash [REQUIRED]
# ============================================
# Get from: Upstash Console > Your Database > Details > REST API
# Format: redis://default:[password]@[hostname]:6379

REDIS_URL="redis://default:REPLACE_WITH_YOUR_UPSTASH_TOKEN@us1-xxxxx.upstash.io:6379"

# ============================================
# AUTHENTICATION - Supabase [REQUIRED]
# ============================================
# Get from: Supabase Dashboard > Project Settings > API

# Project URL (public)
# Format: https://xxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_URL="https://xxxxx.supabase.co"

# Anonymous/Public Key (public - safe to expose in frontend)
# Format: eyJhbGc... (long JWT-like string)
NEXT_PUBLIC_SUPABASE_ANON_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.REPLACE_WITH_YOUR_ANON_KEY"

# Service Role Key (secret - NEVER expose in frontend)
# Format: eyJhbGc... (long JWT-like string, different from anon key)
SUPABASE_SERVICE_ROLE_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.REPLACE_WITH_YOUR_SERVICE_ROLE_KEY"

# ============================================
# WEBHOOK SECURITY [REQUIRED]
# ============================================
# Generate with: openssl rand -base64 32
# This secret is used to verify webhook requests from Nerdy's platform

WEBHOOK_SECRET="REPLACE_WITH_OUTPUT_FROM_OPENSSL_COMMAND"

# ============================================
# OPENAI API - For NLP Analysis [OPTIONAL - Phase 2]
# ============================================
# Get from: https://platform.openai.com/api-keys
# Only needed for Phase 2 (NLP-based quality analysis)
# Format: sk-... (starts with sk-)

# OPENAI_API_KEY="sk-REPLACE_WITH_YOUR_OPENAI_KEY"

# ============================================
# FEATURE FLAGS [OPTIONAL]
# ============================================
# Control which features are enabled
# Values: "true" or "false" (as strings)

# Enable NLP analysis (requires OPENAI_API_KEY)
# Default: false (Phase 1 uses behavioral signals only)
ENABLE_NLP_ANALYSIS="false"

# Enable deep historical analysis (overnight batch processing)
# Default: false (Phase 1 focuses on real-time flags)
ENABLE_DEEP_ANALYSIS="false"

# Enable real-time dashboard updates (WebSocket/SSE)
# Default: false (Phase 1 uses polling)
ENABLE_REAL_TIME_UPDATES="false"

# ============================================
# MONITORING & OBSERVABILITY [OPTIONAL - Production]
# ============================================
# Only needed when deploying to production

# Sentry (Error tracking)
# Get from: https://sentry.io/settings/projects/[your-project]/keys/
# SENTRY_DSN="https://xxxxx@xxxxx.ingest.sentry.io/xxxxx"

# Vercel Analytics (Performance monitoring)
# Auto-populated by Vercel in production
# VERCEL_ANALYTICS_ID="xxxxx"

# ============================================
# SYSTEM VARIABLES [AUTO-SET]
# ============================================
# These are automatically set by Next.js/Vercel
# You typically don't need to set these manually

# NODE_ENV="development"  # Automatically set: development, production, test
# NEXT_PUBLIC_VERCEL_URL  # Auto-set by Vercel (deployment URL)
# VERCEL_ENV              # Auto-set by Vercel (preview, production, development)

# ============================================
# DEVELOPMENT SETTINGS [OPTIONAL]
# ============================================
# Fine-tune development experience

# Log level (debug, info, warn, error)
# LOG_LEVEL="info"

# Enable debug logging for specific modules
# DEBUG="drizzle:*"  # Debug Drizzle ORM queries
# DEBUG="bull:*"     # Debug Bull job queue

# Port for development server (default: 3000)
# PORT="3000"

# ============================================
# TESTING [OPTIONAL]
# ============================================
# Separate database for tests (recommended)

# TEST_DATABASE_URL="postgresql://postgres:password@localhost:5432/tutor_quality_test"
# TEST_REDIS_URL="redis://localhost:6379/1"

# ============================================
# PRODUCTION CONSIDERATIONS
# ============================================
# When deploying to production:
#
# 1. Use Vercel Environment Variables UI
#    Dashboard > Project > Settings > Environment Variables
#
# 2. Mark sensitive variables as "Encrypted"
#    - DATABASE_URL
#    - REDIS_URL
#    - SUPABASE_SERVICE_ROLE_KEY
#    - OPENAI_API_KEY
#    - WEBHOOK_SECRET
#
# 3. Use different values for staging vs. production
#    - Create separate Supabase projects
#    - Create separate Upstash databases
#
# 4. Set appropriate values:
#    - NODE_ENV="production"
#    - ENABLE_NLP_ANALYSIS="true" (if ready)
#    - Add SENTRY_DSN for error tracking
#
# ============================================

# ============================================
# QUICK SETUP CHECKLIST
# ============================================
# [ ] Copied this file to .env.local
# [ ] Replaced DATABASE_URL with Supabase connection pooling URL
# [ ] Replaced DIRECT_URL with Supabase direct connection URL
# [ ] Replaced REDIS_URL with Upstash Redis URL
# [ ] Replaced NEXT_PUBLIC_SUPABASE_URL with your Supabase project URL
# [ ] Replaced NEXT_PUBLIC_SUPABASE_ANON_KEY with your anon key
# [ ] Replaced SUPABASE_SERVICE_ROLE_KEY with your service role key
# [ ] Generated and set WEBHOOK_SECRET (openssl rand -base64 32)
# [ ] Verified .env.local is in .gitignore (should already be there)
# [ ] Tested connection with pnpm dev (after Phase 0 setup)
#
# Ready to start development! ðŸš€
